<!DOCTYPE html>
<html>
<meta charset="UTF-8">

<link rel="stylesheet" type="text/css" href="index.css">
<link rel="stylesheet" type="text/css" href="create_form.css">

<script src="server.js"></script>
<script src="page.js"></script>
<script src="simulation.js"></script>

<body>
    <div id="header">
        <div id="raon-logo">
            <svg width="120" height="28">
                <path style="fill:#f2f2f2"
                    d="M13.7,23c-5.38,0-9.68-4.67-9.07-10.17.47-4.21,3.89-7.6,8.1-8.04,1.93-.2,3.76.2,5.31,1.05.96.52,2.15.31,2.85-.53h0c.94-1.11.6-2.8-.68-3.49C17.95.59,15.32-.01,12.53.22,5.85.77.47,6.25.03,12.94c-.53,7.97,5.81,14.62,13.67,14.62,2.35,0,4.56-.59,6.49-1.64,1.29-.69,1.63-2.38.69-3.5h0c-.7-.83-1.89-1.05-2.84-.53-1.29.7-2.77,1.1-4.34,1.1Z" />
                <path style="fill:#f2f2f2"
                    d="M35.96,12.37l1.44-5.53.1-.18c.34-.6.99-.97,1.68-.97s1.33.37,1.68.97l.1.17,2.42,9.04.56-2.12c.31-.83,1.12-1.38,2-1.38h9.26c-.82-6.83-6.59-12.37-13.6-12.37s-12.78,5.54-13.6,12.37h7.97Z" />
                <path style="fill:#f2f2f2"
                    d="M46.6,15.37l-1.44,5.52-.1.18c-.35.6-.99.97-1.68.97s-1.33-.37-1.68-.97l-.1-.17-2.42-9.03-.56,2.12c-.31.83-1.12,1.38-2,1.38h-8.75v11.09c0,.7.57,1.28,1.28,1.28h12.19c7.16,0,13.18-5.39,13.88-12.37h-8.63Z" />
                <path style="fill:#f2f2f2"
                    d="M82.11.19h0c2.65,0,4.8,2.15,4.8,4.8v22.75h-5.36V9.1c0-.54,0-1.29.02-2.25.01-.97.02-1.71.02-2.23l-4.39,14.07c-.49,1.59-1.96,2.67-3.63,2.67h0c-1.67,0-3.14-1.08-3.63-2.67l-4.36-14.07c0,.52,0,1.27.02,2.23.01.97.02,1.72.02,2.25v18.63h-5.36V5.04c0-2.68,2.17-4.86,4.86-4.86h0c2.1,0,3.96,1.35,4.62,3.34l3.92,11.94,3.9-11.97c.64-1.98,2.49-3.31,4.56-3.31Z" />
                <path style="fill:#f2f2f2"
                    d="M113.96,27.74h6.04L108.08,1.61C107.65.66,106.69,0,105.58,0s-2.07.66-2.5,1.61l-11.92,26.13h6.04l2.74-6.32h11.27l2.74,6.32ZM101.97,16.75l3.61-8.3,3.61,8.3h-7.22Z" />
            </svg>
        </div>
        <div id="title">COntrol Message Alarm</div>
        <div id="search">
            <div id="new-alarm" onclick="showAlarmConfigurationDialog('create', null)">+</div>
            <div id="search-bar">
                <input type="text" id="search-input" placeholder="Search" onkeydown="searchKeyDown(event)">
                <div type="button" id="search-button" onclick="searchAlarmData()">
                    <svg width="22" height="22">
                        <path style="fill:#b3b3b3"
                            d="M21.71,20.29l-5.91-5.91c2.77-3.48,2.55-8.57-.66-11.78-1.67-1.67-3.9-2.6-6.27-2.6S4.27.92,2.6,2.6C.92,4.27,0,6.5,0,8.86s.92,4.59,2.6,6.27c1.73,1.73,4,2.59,6.27,2.59,1.96,0,3.91-.65,5.52-1.93l5.91,5.91c.2.2.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.02,0-1.41ZM4.01,13.72c-1.3-1.3-2.01-3.02-2.01-4.85s.71-3.56,2.01-4.85,3.02-2.01,4.85-2.01,3.56.71,4.85,2.01c2.68,2.68,2.68,7.03,0,9.71-2.68,2.67-7.03,2.68-9.71,0Z" />
                    </svg>
                </div>
            </div>
        </div>
    </div>
    <div id="alarm-summary-container">
        <div id="summary-normal-icon">
            <svg width="60" height="60">
                <circle style="fill:#22b573" cx="30" cy="30" r="30" />
                <path style="fill:#eee"
                    d="M28.69,44.5c-1.57,0-3.04-.8-3.9-2.1l-8.39-10.67c-1.02-1.3-.8-3.19.5-4.21,1.3-1.02,3.19-.8,4.21.5l7.33,9.31,10.11-20.18c.74-1.48,2.54-2.08,4.03-1.34,1.48.74,2.08,2.54,1.34,4.03l-11.19,22.32c-.83,1.44-2.38,2.33-4.04,2.33Z" />
            </svg>
        </div>
        <div id="summary-normal-text">0</div>

        <div id="summary-alarm-icon">
            <svg width="60" height="60">
                <path style="fill:#d4145a"
                    d="M26.54,2L.54,47.02c-1.54,2.67.38,6,3.46,6h51.99c3.08,0,5-3.33,3.46-6L33.46,2c-1.54-2.67-5.39-2.67-6.93,0Z" />
                <circle style="fill:#eee" cx="30" cy="41.07" r="3.5" />
                <path style="fill:#eee"
                    d="M30,14.66c-1.99,0-3.6,1.61-3.6,3.6l1.44,17.26h4.31l1.44-17.26c0-1.99-1.61-3.6-3.6-3.6Z" />
            </svg>

        </div>
        <div id="summary-alarm-text">0</div>

    </div>
    <div id="alarm-list-title">
        <div id="title-activation"></div>
        <div id="title-pvname">Process Variable</div>
        <div id="title-value">Value</div>
        <div id="title-condition">Condition</div>
        <div id="title-status">Status</div>
        <div id="title-delay">Delay</div>
        <div id="title-repetation">Repetation</div>
        <div id="title-phone">Phone</div>
        <div id="title-edit">Edit</div>
        <div id="title-clear">Clear</div>
        <div id="title-delete">Delete</div>

    </div>
    <div id="alarm-list-container">
        <div class="alarmItem">
            <div class="alarmInfo">
                <div class="alarmActivation"></div>
                <div class="alarmPVName">SYS-SUBSYS:DEV-SUBDEV:Signal</div>
                <div class="alarmValue">6.19E-6</div>
                <div class="alarmCondition">&#8805</div>
                <div class="alarmStatus">
                    <svg width="40" height="40">
                        <circle class="icon-normal" cx="20" cy="20" r="20" />
                        <path class="icon-fill"
                            d="M19.11,29.82h0c-1.06,0-2.04-.54-2.62-1.41l-5.71-7.26c-.68-.87-.53-2.12.33-2.81.87-.68,2.13-.53,2.81.33l5.03,6.39,6.91-13.79c.49-.99,1.7-1.39,2.68-.89.99.49,1.39,1.7.89,2.68l-7.61,15.19c-.56.97-1.6,1.57-2.71,1.57Z" />
                    </svg>
                </div>
                <div class="alarmDelay">5sec</div>
                <div class="alarmRepetation">60min</div>
                <div class="alarmPhone">
                    <svg width="22" height="30">
                        <path class="icon-fill"
                            d="M7.66,22.73h0c-1.5-.91-2.01-2.84-1.13-4.36l4.88-8.46c.88-1.52,2.81-2.05,4.34-1.2h0s.52.3.52.3c.96.55,2.19.23,2.74-.73l1.86-3.22c.55-.96.23-2.19-.73-2.74L16.31.1c-1.54-.89-6.33,4.53-10.7,12.1C1.24,19.77-1.06,26.63.48,27.52l3.83,2.21c.96.55,2.19.23,2.74-.73l1.86-3.22c.55-.96.23-2.19-.73-2.74l-.52-.3Z" />
                    </svg>
                </div>
                <div class="alarmEdit">
                    <svg width="19" height="30">
                        <path class="icon-fill"
                            d="M0,25.01v4.42c0,.44.48.72.86.5l3.83-2.21c.17-.1.32-.24.42-.42L16.39,7.75l-4.95-2.86L.15,24.44c-.1.17-.15.37-.15.57Z" />
                        <path class="icon-fill"
                            d="M17.34.38c-1.37-.79-3.12-.32-3.9,1.05l-1.43,2.48,4.95,2.86,1.43-2.48c.79-1.37.32-3.12-1.05-3.9Z" />
                    </svg>
                </div>
                <div class="alarmDelete">
                    <svg width="22" height="30">
                        <path class="icon-fill"
                            d="M.62,5.96l2.39,22.66c.02.77.65,1.38,1.42,1.38h12.44c.77,0,1.4-.61,1.42-1.38l2.39-22.66H.62ZM7.27,22.39c0,.44-.36.8-.8.8h-.12c-.44,0-.8-.36-.8-.8v-10.58c0-.44.36-.8.8-.8h.12c.44,0,.8.36.8.8v10.58ZM11.5,22.39c0,.44-.36.8-.8.8h-.12c-.44,0-.8-.36-.8-.8v-10.58c0-.44.36-.8.8-.8h.12c.44,0,.8.36.8.8v10.58ZM15.74,22.39c0,.44-.36.8-.8.8h-.12c-.44,0-.8-.36-.8-.8v-10.58c0-.44.36-.8.8-.8h.12c.44,0,.8.36.8.8v10.58Z" />
                        <path class="icon-fill"
                            d="M19.29,1.7h-6.95c0-.94-.76-1.7-1.7-1.7s-1.7.76-1.7,1.7H2C.9,1.7,0,2.6,0,3.7v.84h21.29v-.84c0-1.1-.9-2-2-2Z" />
                    </svg>
                </div>
            </div>
            <div class="smsInfo">
                <div class="smsActivation">
                    <svg width="20" height="20">
                        <rect class="cls-11" width="20" height="20" rx="2" ry="2" style="fill:#22b573" />
                        <path class="cls-12"
                            d="M9.44,15.9c-.59,0-1.12-.29-1.44-.78l-3.59-4.56c-.34-.43-.27-1.06.17-1.4.43-.34,1.06-.27,1.4.17l3.4,4.32,4.51-9c.25-.49.85-.69,1.34-.45.49.25.69.85.45,1.34l-4.74,9.45c-.34.59-.89.91-1.51.91Z"
                            style="fill: #eee;" />
                    </svg>
                </div>
                <div class="smsPhoneNumber">0428788831</div>
                <div class="smsDelete">
                    <svg width="25" height="25">
                        <circle cx="12.5" cy="12.5" r="12.5" style="fill:#d4145a" />
                        <rect x="5" y="10.5" width="15" height="4" style="fill:#eee" />
                    </svg>
                </div>
            </div>
            <div class="smsInfo">
                <div class="smsActivation">
                    <svg width="20" height="20">
                        <rect class="cls-11" width="20" height="20" rx="2" ry="2" style="fill:#22b573" />
                        <path class="cls-12"
                            d="M9.44,15.9c-.59,0-1.12-.29-1.44-.78l-3.59-4.56c-.34-.43-.27-1.06.17-1.4.43-.34,1.06-.27,1.4.17l3.4,4.32,4.51-9c.25-.49.85-.69,1.34-.45.49.25.69.85.45,1.34l-4.74,9.45c-.34.59-.89.91-1.51.91Z"
                            style="fill: #eee;" />
                    </svg>
                </div>
                <div class="smsPhoneNumber">0428788831</div>
                <div class="smsDelete">
                    <svg width="25" height="25">
                        <circle cx="12.5" cy="12.5" r="12.5" style="fill:#d4145a" />
                        <rect x="5" y="10.5" width="15" height="4" style="fill:#eee" />
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- New Alarm Form -->
    <div id="config-dialog-body">
        <form id="config-form-container">
            <div class="configFormCancelButton" onclick="closeAlarmConfigurationDialog()">
                <svg width="30" height="30">
                    <circle cx="15" cy="15" r="15" style="fill:#d41c5c" />
                    <polygon style="fill:#eeedee"
                        points="22.41 10.41 19.59 7.59 15 12.17 10.41 7.59 7.59 10.41 12.17 15 7.59 19.59 10.41 22.41 15 17.83 19.59 22.41 22.41 19.59 17.83 15 22.41 10.41" />
                </svg>

            </div>
            <div class="configFormItem">
                <label>Process Variable</label>
                <input id="config-pvname" type="text" name="pvname">
            </div>
            <div class="configFormItem">
                <label>Description</label>
                <input id="config-description" type="text" name="desc">
            </div>

            <div class="configFormItem">
                <label>Value</label>
                <div class="configFormItemChild">
                    <div class="configFormChildItem">
                        <input id="config-value" type="text" pattern="[0-9]" title="Number" name="value"
                            style="width: 120px; margin-right: 20px;">
                    </div>
                    <div class="configFormChildItem">
                        <select id="config-condition" name="condition" style="width: 70px; margin-right: 30px;">
                            <option value="0" selected="selected">&#61</option>
                            <option value="1">&#60</option>
                            <option value="2">&#62</option>
                            <option value="3">&#8800</option>
                            <option value="4">&#8804</option>
                            <option value="5">&#8805</option>
                        </select>
                    </div>
                    <div class="configFormChildItem">
                        <select id="config-delay" name="delay" style="width: 80px; margin-right: 20px;">
                            <option value="0">0s</option>
                            <option value="5" selected="selected">5s</option>
                            <option value="10">10s</option>
                            <option value="30">30s</option>
                            <option value="60">60s</option>
                        </select>
                    </div>
                    <div class="configFormChildItem">
                        <select id="config-repetation" name="repetation" style="width: 80px; margin-right: 0px;">
                            <option value="0" selected="selected">No</option>
                            <option value="1">1m</option>
                            <option value="5">5m</option>
                            <option value="10">10m</option>
                            <option value="30">30m</option>
                            <option value="60">60m</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="configFormItem" style="margin-top: 40px">
                <div class="configFormItemChild">
                    <label>Message List</label>
                    <div class="configMessageUserAddButton" type="button" onclick="createMessageUser()">
                        <svg width="26" height="26">
                            <circle style="fill:#29abe2" cx="13" cy="13" r="13" />
                            <polygon style="fill:#eee"
                                points="20.8 11 15 11 15 5.2 11 5.2 11 11 5.2 11 5.2 15 11 15 11 20.8 15 20.8 15 15 20.8 15 20.8 11" />
                        </svg>
                    </div>
                </div>

                <div id="config-message-user-list">
                    <div class="configMessageUserListContainer">
                        <div class="configMessagePhoneIcon">
                            <svg width="22" height="30">
                                <path style="fill:#eeeeee"
                                    d="M7.66,22.73h0c-1.5-.91-2.01-2.84-1.13-4.36l4.88-8.46c.88-1.52,2.81-2.05,4.34-1.2h0s.52.3.52.3c.96.55,2.19.23,2.74-.73l1.86-3.22c.55-.96.23-2.19-.73-2.74L16.31.1c-1.54-.89-6.33,4.53-10.7,12.1C1.24,19.77-1.06,26.63.48,27.52l3.83,2.21c.96.55,2.19.23,2.74-.73l1.86-3.22c.55-.96.23-2.19-.73-2.74l-.52-.3Z" />
                            </svg>
                        </div>
                        <div class="configMessagePhoneNumber">0428788841</div>
                        <div class="configMessagePhoneDelete">
                            <svg width="25" height="25">
                                <circle cx="12.5" cy="12.5" r="12.5" style="fill:#d4145a" />
                                <rect x="5" y="10.5" width="15" height="4" style="fill:#eee" />
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <div class="configFormItem">

                <button id="config-set-button" type="button" class="configSetButton"></button>

            </div>
        </form>
    </div>
</body>
<script>

    // getAlarmListAll();
    makeAlarmList();
    setInterval(monitoringAlarmState, 2000);
    setInterval(monitoringConnectionState, 2000);
</script>

</html>